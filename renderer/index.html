<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic Browser</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Light Mode */
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --bg-tertiary: #ebebeb;
            --text-primary: #1a1a1a;
            --text-secondary: #555555;
            --border-color: #e0e0e0;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --summary-bg: rgba(255, 255, 255, 0.95);
            --summary-border: rgba(0, 0, 0, 0.1);
        }

        html.dark-mode {
            --bg-primary: #0f0f0f;
            --bg-secondary: #1a1a1a;
            --bg-tertiary: #2a2a2a;
            --text-primary: #f5f5f5;
            --text-secondary: #b0b0b0;
            --border-color: #333333;
            --accent: #60a5fa;
            --accent-hover: #93c5fd;
            --summary-bg: rgba(20, 20, 20, 0.95);
            --summary-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-secondary);
            gap: 24px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            white-space: nowrap;
            min-width: fit-content;
        }

        .search-container {
            flex: 1;
            max-width: 600px;
        }

        .search-bar {
            display: flex;
            align-items: center;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 10px 16px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .search-bar:focus-within {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .search-bar input {
            flex: 1;
            border: none;
            outline: none;
            background: transparent;
            color: var(--text-primary);
            font-size: 14px;
            padding: 0 8px;
        }

        .search-bar input::placeholder {
            color: var(--text-secondary);
        }

        .search-icon {
            color: var(--text-secondary);
            font-size: 18px;
        }

        .controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .theme-toggle {
            background: transparent;
            border: 1px solid var(--border-color);
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            color: var(--text-primary);
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background-color: var(--bg-tertiary);
        }

        /* Main Container */
        .container {
            display: flex;
            height: calc(100vh - 70px);
            width: 100%;
            /* content should take full width; sidebar will be fixed so it won't occupy flow space */
        }

        /* Content Area */
        .content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 24px;
            position: relative;
        }

        /* Summary Window */
        .summary-window {
            background-color: var(--summary-bg);
            border: 1px solid var(--summary-border);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: move;
            user-select: none;
            min-height: 200px;
            max-height: 300px;
            overflow-y: auto;
        }

        .summary-window.floating {
            position: absolute;
            right: 24px;
            top: 100px;
            width: 350px;
            z-index: 100;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .summary-header h3 {
            font-size: 16px;
            font-weight: 600;
        }

        .summary-close {
            background: transparent;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .summary-close:hover {
            color: var(--text-primary);
        }

        .summary-content {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        /* Links Section */
        .links-section {
            flex: 1;
        }

        .links-header {
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .links-header h2 {
            font-size: 18px;
            font-weight: 600;
        }

        .links-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 12px;
        }

        .link-card {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: var(--text-primary);
        }

        .link-card:hover {
            background-color: var(--bg-tertiary);
            border-color: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .link-title {
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 8px;
            color: var(--accent);
        }

        .link-description {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .link-url {
            font-size: 12px;
            color: var(--text-secondary);
            word-break: break-all;
            opacity: 0.7;
        }

        /* Sidebar: fixed overlay so it doesn't take layout space when hidden */
        .sidebar {
            position: fixed;
            right: 0;
            top: 70px; /* below header */
            bottom: 0;
            width: 350px;
            background-color: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transform: translateX(100%);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            overflow-y: auto;
            z-index: 40;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        .sidebar.active {
            transform: translateX(0);
        }

        /* When the sidebar is open, reserve content space (only then) so main content doesn't get covered */
        body.sidebar-open .container .content {
            padding-right: 380px; /* sidebar width + spacing */
            transition: padding-right 0.3s ease;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-header h2 {
            font-size: 18px;
            font-weight: 600;
        }

        .sidebar-close {
            background: transparent;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }

        .sidebar-close:hover {
            color: var(--text-secondary);
        }

        .ai-chat {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .chat-message {
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 14px;
            line-height: 1.5;
            word-wrap: break-word;
        }

        .chat-message.ai {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
            align-self: flex-start;
            max-width: 85%;
        }

        .chat-message.user {
            background-color: var(--accent);
            color: white;
            align-self: flex-end;
            max-width: 85%;
        }

        .ai-input-area {
            padding: 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 8px;
        }

        .ai-input-area input {
            flex: 1;
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px 12px;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }

        .ai-input-area input:focus {
            border-color: var(--accent);
        }

        .ai-input-area button {
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 16px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s ease;
        }

        .ai-input-area button:hover {
            background-color: var(--accent-hover);
        }

        /* Sidebar Toggle Button */
        .ai-toggle {
            position: fixed;
            right: 24px;
            bottom: 24px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: var(--accent);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            transition: all 0.3s ease;
            z-index: 50;
        }

        .ai-toggle:hover {
            background-color: var(--accent-hover);
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.6);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-wrap: wrap;
                gap: 12px;
            }

            .search-container {
                max-width: 100%;
                order: 3;
                flex-basis: 100%;
            }

            .container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                height: 50vh;
                border-left: none;
                border-top: 1px solid var(--border-color);
            }

            .links-grid {
                grid-template-columns: 1fr;
            }

            .summary-window.floating {
                position: static;
                width: 100%;
                max-height: none;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">‚óÜ AgentBrowser</div>
        <div class="search-container">
            <div class="search-bar">
                <span class="search-icon">üîç</span>
                <input type="text" id="searchInput" placeholder="Search the web...">
            </div>
        </div>
        <div class="controls">
            <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">
                ‚òÄÔ∏è
            </button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Content Area -->
        <div class="content">
            <!-- Summary Window -->
            <div class="summary-window" id="summaryWindow">
                <div class="summary-header">
                    <h3>Summary</h3>
                    <button class="summary-close" id="closeSummary">&times;</button>
                </div>
                <div class="summary-content" id="summaryContent">
                    The AI agent will analyze search results and provide a concise summary of the most relevant information to your query. Hover over any link to preview more details.
                </div>
            </div>

            <!-- Links Section -->
            <div class="links-section">
                <div class="links-header">
                    <h2>Retrieved Results</h2>
                </div>
                <div class="links-grid" id="linksGrid">
                    <!-- Links will be dynamically added here -->
                    <div class="link-card">
                        <div class="link-title">Getting Started with AI</div>
                        <div class="link-description">Learn the fundamentals of artificial intelligence and how AI agents work in modern applications.</div>
                        <div class="link-url">example.com/ai-guide</div>
                    </div>
                    <div class="link-card">
                        <div class="link-title">Web Browsing Automation</div>
                        <div class="link-description">Discover techniques for automated web browsing and content extraction with intelligent agents.</div>
                        <div class="link-url">example.com/automation</div>
                    </div>
                    <div class="link-card">
                        <div class="link-title">Natural Language Processing</div>
                        <div class="link-description">Understand how NLP enables AI agents to understand and process human language effectively.</div>
                        <div class="link-url">example.com/nlp-advanced</div>
                    </div>
                    <div class="link-card">
                        <div class="link-title">Agent Architecture</div>
                        <div class="link-description">Explore the architecture patterns and best practices for building scalable AI agents.</div>
                        <div class="link-url">example.com/architecture</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Assistant Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>AI Assistant</h2>
                <button class="sidebar-close" id="closeSidebar">&times;</button>
            </div>
            <div class="ai-chat" id="aiChat">
                <div class="chat-message ai">
                    üëã Hello! I'm your AI assistant. I can help you refine your search, answer questions about the results, or explore related topics.
                </div>
                <div class="chat-message ai">
                    What would you like to know?
                </div>
            </div>
            <div class="ai-input-area">
                <input type="text" id="aiInput" placeholder="Ask me anything...">
                <button id="aiSendBtn">Send</button>
            </div>
        </div>
    </div>

    <!-- AI Toggle Button -->
    <button class="ai-toggle" id="aiToggle" title="Open AI Assistant">üí¨</button>

    <script>
        // Theme Toggle
        const themeToggle = document.getElementById('themeToggle');
        const html = document.documentElement;

        // Check for saved theme preference
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
            html.classList.add('dark-mode');
            themeToggle.textContent = 'üåô';
        }

        themeToggle.addEventListener('click', () => {
            html.classList.toggle('dark-mode');
            const isDark = html.classList.contains('dark-mode');
            themeToggle.textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        });

        // Sidebar Toggle
        const aiToggle = document.getElementById('aiToggle');
        const sidebar = document.getElementById('sidebar');
        const closeSidebar = document.getElementById('closeSidebar');

        aiToggle.addEventListener('click', () => {
            const opening = !sidebar.classList.contains('active');
            sidebar.classList.toggle('active');
            // add/remove body class so content can reserve space only when sidebar is visible
            document.body.classList.toggle('sidebar-open', opening);
            // hide the floating AI toggle button while the sidebar is open to avoid overlap
            aiToggle.style.display = opening ? 'none' : '';
        });

        closeSidebar.addEventListener('click', () => {
            sidebar.classList.remove('active');
            document.body.classList.remove('sidebar-open');
            // ensure the AI toggle button is visible again when sidebar is closed
            aiToggle.style.display = '';
        });

        // AI Chat
        const aiInput = document.getElementById('aiInput');
        const aiSendBtn = document.getElementById('aiSendBtn');
        const aiChat = document.getElementById('aiChat');

        const sampleResponses = [
            "That's a great question! Let me search for more information about that.",
            "I found some interesting results. Would you like me to summarize them?",
            "Based on the search results, here are the key insights...",
            "Let me refine the search to find more relevant results for you.",
            "I can help you explore this topic further. What aspect interests you most?"
        ];

        aiSendBtn.addEventListener('click', () => {
            const message = aiInput.value.trim();
            if (message) {
                // Add user message
                const userMsg = document.createElement('div');
                userMsg.className = 'chat-message user';
                userMsg.textContent = message;
                aiChat.appendChild(userMsg);

                aiInput.value = '';

                // Add AI response
                setTimeout(() => {
                    const aiMsg = document.createElement('div');
                    aiMsg.className = 'chat-message ai';
                    aiMsg.textContent = sampleResponses[Math.floor(Math.random() * sampleResponses.length)];
                    aiChat.appendChild(aiMsg);
                    aiChat.scrollTop = aiChat.scrollHeight;
                }, 600);

                aiChat.scrollTop = aiChat.scrollHeight;
            }
        });

        aiInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                aiSendBtn.click();
            }
        });

        // Summary Window Dragging
        const summaryWindow = document.getElementById('summaryWindow');
        const closeSummary = document.getElementById('closeSummary');
        let isDragging = false;
        let offsetX = 0;
        let offsetY = 0;

        summaryWindow.addEventListener('mousedown', (e) => {
            if (e.target === closeSummary || e.target.closest('.summary-close')) return;
            
            isDragging = true;
            summaryWindow.classList.add('floating');
            
            const rect = summaryWindow.getBoundingClientRect();
            offsetX = e.clientX - rect.left;
            offsetY = e.clientY - rect.top;
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                summaryWindow.style.left = (e.clientX - offsetX) + 'px';
                summaryWindow.style.top = (e.clientY - offsetY) + 'px';
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
        });

        closeSummary.addEventListener('click', () => {
            summaryWindow.style.display = 'none';
        });

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const query = searchInput.value;
                console.log('Searching for:', query);
                // Here you would integrate with your backend API
            }
        });
    </script>
</body>
</html>